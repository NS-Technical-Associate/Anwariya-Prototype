This backend is a FastAPI application that provides a RESTful API for a platform that seems to connect vendors and influencers. It uses a SQLite database via SQLAlchemy for data persistence.

## Key Features:

- **User Management:** Endpoints for creating and retrieving users (vendors or influencers).
- **Campaign Management:** Endpoints for creating and listing marketing campaigns.
- **Chat:** Functionality for one-on-one chats between users, likely related to campaigns. This includes creating/getting chats and sending/retrieving messages.
- **Token System:** Users have tokens that can be fetched and deducted. This could be a form of currency on the platform.
- **Influencer Profiles:** Influencers can create and manage a detailed profile including their niche, follower range, engagement rate, bio, and content types.
- **Product and Inventory Management:** Vendors can add products, including cost price and quantity available.
- **Billing and Invoicing:** An endpoint to create bills for product sales. When a bill is created, it:
    - Calculates total cost and profit.
    - Decrements the product quantity.
    - Generates a PDF invoice.
    - Emails the invoice to the customer.
- **Analytics:** An endpoint to provide sales analytics for a vendor, including:
    - Key Performance Indicators (KPIs) like total profit, total units sold, and number of products.
    - Detailed sales data per product (quantity, revenue, cost, profit).
    - A list of products with low stock.
- **AI-Powered Marketing Insights:** An experimental feature that uses AI (likely a large language model) to generate marketing insights based on the sales analytics data.

## Project Structure:

- **`main.py`**: The main FastAPI application file. It defines all the API endpoints, handles HTTP requests, and orchestrates the application's logic.
- **`crud.py`**: Contains the CRUD (Create, Read, Update, Delete) operations for interacting with the database. This file separates the database logic from the API endpoint logic.
- **`db.py`**: Configures the database connection (SQLite) and session management using SQLAlchemy.
- **`models.py`**: Defines the SQLAlchemy database models, which represent the database tables (`User`, `Campaign`, `Chat`, `Message`, `InfluencerProfile`, `Product`, `Bill`).
- **`schemas.py`**: Defines the Pydantic models used for data validation and serialization/deserialization of API request and response bodies. This ensures that the data flowing in and out of the API is well-structured.
- **`utils/`**: A directory for utility modules.
    - **`email.py`**: Contains a function to send emails with attachments (used for sending invoices). It's configured to use Gmail's SMTP server.
    - **`pdf.py`**: Contains a function to generate PDF invoices using the `reportlab` library.
- **`requirements.txt`**: Lists the Python dependencies for the project, which include `fastapi`, `sqlalchemy`, `uvicorn`, `pydantic`, `reportlab`, and `python-dotenv`.
- **`invoices/`**: A directory where generated PDF invoices are stored.
- **`.env`**: (Not present, but loaded in the code) A file to store environment variables like email credentials.

## How it works:

1.  A request hits an endpoint in `main.py`.
2.  The endpoint function calls the appropriate function in `crud.py` to interact with the database.
3.  The `crud.py` function uses SQLAlchemy models from `models.py` to query or modify the database.
4.  Data sent in requests is validated by Pydantic models from `schemas.py`.
5.  Data sent in responses is also structured using Pydantic models.
6.  For specific tasks like sending emails or generating PDFs, the endpoint calls functions from the `utils` directory.

## Missing Features / Areas for Improvement:

The current implementation provides a good foundation, but is missing several standard functionalities:

- **Incomplete CRUD Operations:** Most of the features are missing `UPDATE` and `DELETE` operations. For example, you can create a campaign, but you cannot edit or delete it. The same applies to products, user profiles, and bills.
- **No Single-Item Endpoints:** Many features lack endpoints for retrieving a single item by its ID. For example, you can get all campaigns, but you cannot get a single campaign by its ID.
- **User Management:** User functionality is very basic. It's missing features like password management, authentication, and the ability to update or delete user accounts.
- **Bill Management:** While you can create a bill, there are no endpoints to list, view, update, or delete existing bills.
- **Error Handling:** The error handling is basic. More specific error messages and status codes could be used.
- **Testing:** There are no automated tests for the API endpoints or the database logic.
